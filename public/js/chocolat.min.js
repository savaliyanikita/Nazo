!function(){"use strict";function H(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function M(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function R(e,t){return e(t={exports:{}},t.exports),t.exports}function t(e){return e&&e.Math==Math&&e}function n(e){try{return!!e()}catch(e){return!0}}function c(e){return le(ue(e))}function N(e){return Object(ue(e))}function G(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++fe+pe).toString(36)}function i(e,t){return arguments.length<2?(n=k[e],C(n)?n:void 0):k[e]&&k[e][t];var n}function s(e){return v(S,e)&&(ge||"string"==typeof S[e])||(ge&&v(O,e)?S[e]=O[e]:S[e]=ve("Symbol."+e)),S[e]}function r(e){if(p(e))return e;throw TypeError(String(e)+" is not an object")}function D(e){if(C(e))return e;throw TypeError(function(e){try{return String(e)}catch(e){return"Object"}}(e)+" is not a function")}function q(e){return e=function(e,t){if(!p(e)||be(e))return e;var n=we(e,Oe);if(n){if(n=n.call(e,t=void 0===t?"default":t),!p(n)||be(n))return n;throw TypeError("Can't convert object to primitive value")}return Se(e,t=void 0===t?"number":t)}(e,"string"),be(e)?e:String(e)}function B(a){return function(e,t,n){var i,s=c(e),o=je(s.length),r=function(e,t){e=Ce(e);return e<0?Ee(e+t,0):Ae(e,t)}(n,o);if(a&&t!=t){for(;r<o;)if((i=s[r++])!=i)return!0}else for(;r<o;r++)if((a||r in s)&&s[r]===t)return a||r||0;return!a&&-1}}function Z(e,t){var n,i=c(e),s=0,o=[];for(n in i)!v(ze,n)&&v(i,n)&&o.push(n);for(;t.length>s;)!v(i,n=t[s++])||~xe(o,n)||o.push(n);return o}function V(e){return He[e]||(He[e]=G(e))}function Y(){}function U(e){e.write(Ne("")),e.close();var t=e.parentWindow.Object;return e=null,t}function X(e){qe[De][e]=!0}function o(e,t){return(e=at[rt(e)])==lt||e!=ct&&(C(t)?n(t):!!t)}function $(){return this}function K(t,e){if(t){if(t[Tt]!==zt)try{j(t,Tt,zt)}catch(e){t[Tt]=zt}if(t[jt]||j(t,jt,e),ie[e])for(var n in W)if(t[n]!==W[n])try{j(t,n,W[n])}catch(e){t[n]=W[n]}}}var J,a,Q,ee,te,l,u,ne,h,m,f,k=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||function(){return this}()||Function("return this")(),ie={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},C=function(e){return"function"==typeof e},p=function(e){return"object"==typeof e?null!==e:C(e)},se=k.document,oe=p(se)&&p(se.createElement),re=function(e){return oe?se.createElement(e):{}},e=re("span").classList,e=e&&e.constructor&&e.constructor.prototype,e=e===Object.prototype?void 0:e,ae={}.toString,ce="".split,le=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==ae.call(e).slice(8,-1)?ce.call(e,""):Object(e)}:Object,ue=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},he=function(t,n){try{Object.defineProperty(k,t,{value:n,configurable:!0,writable:!0})}catch(e){k[t]=n}return n},d="__core-js_shared__",g=k[d]||he(d,{}),d=R(function(e){(e.exports=function(e,t){return g[e]||(g[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.3",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})}),me={}.hasOwnProperty,v=Object.hasOwn||function(e,t){return me.call(N(e),t)},fe=0,pe=Math.random(),y=i("navigator","userAgent")||"",b=k.process,w=k.Deno,b=b&&b.versions||w&&w.version,w=b&&b.v8,de=(w?T=(A=w.split("."))[0]<4?1:A[0]+A[1]:y&&(!(A=y.match(/Edge\/(\d+)/))||74<=A[1])&&(A=y.match(/Chrome\/(\d+)/))&&(T=A[1]),T&&+T),ge=!!Object.getOwnPropertySymbols&&!n(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&de&&de<41}),b=ge&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,S=d("wks"),O=k.Symbol,ve=b?O:O&&O.withoutSetter||G,w=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),ye=!w&&!n(function(){return 7!=Object.defineProperty(re("div"),"a",{get:function(){return 7}}).a}),be=b?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return C(t)&&Object(e)instanceof t},we=function(e,t){e=e[t];return null==e?void 0:D(e)},Se=function(e,t){var n,i;if("string"===t&&C(n=e.toString)&&!p(i=n.call(e)))return i;if(C(n=e.valueOf)&&!p(i=n.call(e)))return i;if("string"!==t&&C(n=e.toString)&&!p(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},Oe=s("toPrimitive"),Ie=Object.defineProperty,I={f:w?Ie:function(e,t,n){if(r(e),t=q(t),r(n),ye)try{return Ie(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Le=Math.ceil,ke=Math.floor,Ce=function(e){e=+e;return e!=e||0==e?0:(0<e?ke:Le)(e)},Ee=Math.max,Ae=Math.min,Te=Math.min,je=function(e){return 0<e?Te(Ce(e),9007199254740991):0},y={includes:B(!0),indexOf:B(!1)},ze={},xe=y.indexOf,L=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Pe=Object.keys||function(e){return Z(e,L)},We=w?Object.defineProperties:function(e,t){r(e);for(var n,i=Pe(t),s=i.length,o=0;o<s;)I.f(e,n=i[o++],t[n]);return e},Fe=i("document","documentElement"),He=d("keys"),Me="prototype",_e="script",Re=V("IE_PROTO"),Ne=function(e){return"<"+_e+">"+e+"</"+_e+">"},E=function(){try{J=new ActiveXObject("htmlfile")}catch(e){}E="undefined"==typeof document||document.domain&&J?U(J):(e=re("iframe"),t="java"+_e+":",e.style.display="none",Fe.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(Ne("document.F=Object")),t.close(),t.F);for(var e,t,n=L.length;n--;)delete E[Me][L[n]];return E()},Ge=(ze[Re]=!0,Object.create||function(e,t){var n;return null!==e?(Y[Me]=r(e),n=new Y,Y[Me]=null,n[Re]=e):n=E(),void 0===t?n:We(n,t)}),De=s("unscopables"),qe=Array.prototype,Be=(null==qe[De]&&I.f(qe,De,{configurable:!0,value:Ge(null)}),Function.toString),Ze=(C(g.inspectSource)||(g.inspectSource=function(e){return Be.call(e)}),g.inspectSource),A=k.WeakMap,T=C(A)&&/native code/.test(Ze(A)),Ve=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},j=w?function(e,t,n){return I.f(e,t,Ve(1,n))}:function(e,t,n){return e[t]=n,e},Ye="Object already initialized",b=k.WeakMap,Ue=(ne=T||g.state?(a=g.state||(g.state=new b),Q=a.get,ee=a.has,te=a.set,l=function(e,t){if(ee.call(a,e))throw new TypeError(Ye);return t.facade=e,te.call(a,e,t),t},u=function(e){return Q.call(a,e)||{}},function(e){return ee.call(a,e)}):(h=V("state"),ze[h]=!0,l=function(e,t){if(v(e,h))throw new TypeError(Ye);return t.facade=e,j(e,h,t),t},u=function(e){return v(e,h)?e[h]:{}},function(e){return v(e,h)}),{set:l,get:u,has:ne,enforce:function(e){return ne(e)?u(e):l(e,{})},getterFor:function(t){return function(e){if(p(e)&&(e=u(e)).type===t)return e;throw TypeError("Incompatible receiver, "+t+" required")}}}),y={}.propertyIsEnumerable,Xe=Object.getOwnPropertyDescriptor,$e={f:Xe&&!y.call({1:2},1)?function(e){e=Xe(this,e);return!!e&&e.enumerable}:y},Ke=Object.getOwnPropertyDescriptor,Je={f:w?Ke:function(e,t){if(e=c(e),t=q(t),ye)try{return Ke(e,t)}catch(e){}if(v(e,t))return Ve(!$e.f.call(e,t),e[t])}},d=Function.prototype,A=w&&Object.getOwnPropertyDescriptor,T=v(d,"name"),Qe={EXISTS:T,PROPER:T&&"something"===function(){}.name,CONFIGURABLE:T&&(!w||A(d,"name").configurable)},z=R(function(e){var c=Qe.CONFIGURABLE,t=Ue.get,l=Ue.enforce,u=String(String).split("String");(e.exports=function(e,t,n,i){var s,o=!!i&&!!i.unsafe,r=!!i&&!!i.enumerable,a=!!i&&!!i.noTargetGet,i=i&&void 0!==i.name?i.name:t;C(n)&&("Symbol("===String(i).slice(0,7)&&(i="["+String(i).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(n,"name")||c&&n.name!==i)&&j(n,"name",i),(s=l(n)).source||(s.source=u.join("string"==typeof i?i:""))),e===k?r?e[t]=n:he(t,n):(o?!a&&e[t]&&(r=!0):delete e[t],r?e[t]=n:j(e,t,n))})(Function.prototype,"toString",function(){return C(this)&&t(this).source||Ze(this)})}),et=L.concat("length","prototype"),tt={f:Object.getOwnPropertyNames||function(e){return Z(e,et)}},nt={f:Object.getOwnPropertySymbols},it=i("Reflect","ownKeys")||function(e){var t=tt.f(r(e)),n=nt.f;return n?t.concat(n(e)):t},st=function(e,t){for(var n=it(t),i=I.f,s=Je.f,o=0;o<n.length;o++){var r=n[o];v(e,r)||i(e,r,s(t,r))}},ot=/#|\.prototype\./,rt=o.normalize=function(e){return String(e).replace(ot,".").toLowerCase()},at=o.data={},ct=o.NATIVE="N",lt=o.POLYFILL="P",ut=o,ht=Je.f,b=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),mt=V("IE_PROTO"),ft=Object.prototype,pt=b?Object.getPrototypeOf:function(e){e=N(e);if(v(e,mt))return e[mt];var t=e.constructor;return C(t)&&e instanceof t?t.prototype:e instanceof Object?ft:null},dt=s("iterator"),y=!1,A=([].keys&&("next"in(T=[].keys())?(w=pt(pt(T)))!==Object.prototype&&(m=w):y=!0),null==m||n(function(){var e={};return m[dt].call(e)!==e})),d=(C((m=A?{}:m)[dt])||z(m,dt,function(){return this}),{IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:y}),gt=I.f,vt=s("toStringTag"),yt=function(e,t,n){e&&!v(e=n?e:e.prototype,vt)&&gt(e,vt,{configurable:!0,value:t})},bt=d.IteratorPrototype,wt=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,e={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),i=e instanceof Array}catch(e){}return function(e,t){return r(e),function(e){if("object"==typeof e||C(e))return;throw TypeError("Can't set "+String(e)+" as a prototype")}(t),i?n.call(e,t):e.__proto__=t,e}}():void 0),St=Qe.PROPER,Ot=Qe.CONFIGURABLE,It=d.IteratorPrototype,Lt=d.BUGGY_SAFARI_ITERATORS,x=s("iterator"),P="values",kt="entries",Ct="Array Iterator",Et=Ue.set,At=Ue.getterFor(Ct),W=function(e,t,n,i,s,o,r){function a(e){if(e===s&&d)return d;if(!Lt&&e in f)return f[e];switch(e){case"keys":case P:case kt:return function(){return new n(this,e)}}return function(){return new n(this)}}var c,l,u=n,h=t,i=(h+=" Iterator",u.prototype=Ge(bt,{next:Ve(1,i)}),yt(u,h,!1,!0),t+" Iterator"),m=!1,f=e.prototype,p=f[x]||f["@@iterator"]||s&&f[s],d=!Lt&&p||a(s),u="Array"==t&&f.entries||p;if(u&&(h=pt(u.call(new e)))!==Object.prototype&&h.next&&(pt(h)!==It&&(wt?wt(h,It):C(h[x])||z(h,x,$)),yt(h,i,!0,!0)),St&&s==P&&p&&p.name!==P&&(Ot?j(f,"name",P):(m=!0,d=function(){return p.call(this)})),s)if(c={values:a(P),keys:o?d:a("keys"),entries:a(kt)},r)for(l in c)!Lt&&!m&&l in f||z(f,l,c[l]);else{var g={target:t,proto:!0,forced:Lt||m};var v=c;var y,b,w,S=g.target,O=g.global,I=g.stat,L=O?k:I?k[S]||he(S,{}):(k[S]||{}).prototype;if(L)for(y in v){if(b=v[y],w=g.noTargetGet?(w=ht(L,y))&&w.value:L[y],!ut(O?y:S+(I?".":"#")+y,g.forced)&&void 0!==w){if(typeof b==typeof w)continue;st(b,w)}(g.sham||w&&w.sham)&&j(b,"sham",!0),z(L,y,b,g)}}return f[x]!==d&&z(f,x,d,{name:s}),c}(Array,"Array",function(e,t){Et(this,{type:Ct,target:c(e),index:0,kind:t})},function(){var e=At(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values"),Tt=(X("keys"),X("values"),X("entries"),s("iterator")),jt=s("toStringTag"),zt=W.values;for(f in ie)K(k[f]&&k[f].prototype,f);K(e,"DOMTokenList");var xt=void 0;function F(s,o){return new Promise(function(e){function t(){o.removeEventListener("transitionend",t),e()}o.addEventListener("transitionend",t);var n=o.getAttribute("class"),i=o.getAttribute("style");s(),n===o.getAttribute("class")&&i===o.getAttribute("style")&&t(),0===parseFloat(getComputedStyle(o).transitionDuration)&&t()})}function Pt(e){var t=e.src,n=e.srcset,e=e.sizes,i=new Image;return i.src=t,n&&(i.srcset=n),e&&(i.sizes=e),"decode"in i?new Promise(function(e,t){i.decode().then(function(){e(i)}).catch(function(){t(i)})}):new Promise(function(e,t){i.onload=e(i),i.onerror=t(i)})}function Wt(e){var t,n,i=e.imgHeight,s=e.imgWidth,o=e.containerHeight,r=e.containerWidth,a=e.canvasWidth,c=e.canvasHeight,e=e.imageSize,l=i/s;return"cover"==e?l<o/r?n=(t=o)/l:t=(n=r)*l:"native"==e?(t=i,n=s):(c/a<l?n=(t=c)/l:t=(n=a)*l,"scale-down"===e&&(s<=n||i<=t)&&(n=s,t=i)),{height:t,width:n}}function Ft(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():Promise.reject()}function Ht(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():Promise.reject()}var Mt={container:document.body,className:void 0,imageSize:"scale-down",fullScreen:!1,loop:!1,linkImages:!0,setIndex:0,firstImageIndex:0,lastImageIndex:!1,currentImageIndex:void 0,allowZoom:!0,closeOnBackgroundClick:!0,imageSourceAttribute:"href",setTitle:function(){return""},description:function(){return this.images[this.settings.currentImageIndex].title},pagination:function(){var e=this.settings.lastImageIndex+1;return this.settings.currentImageIndex+1+"/"+e},afterInitialize:function(){},afterMarkup:function(){},beforeImageLoad:function(){},afterImageLoad:function(){},afterClose:function(){},zoomedPaddingX:function(e,t){return 0},zoomedPaddingY:function(e,t){return 0}},_t=function(){function t(e,n){var i=this;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.settings=n,this.elems={},this.images=[],this.events=[],this.state={fullScreenOpen:!1,initialZoomState:null,initialized:!1,timer:!1,visible:!1},this._cssClasses=["chocolat-open","chocolat-in-container","chocolat-cover","chocolat-zoomable","chocolat-zoomed","chocolat-zooming-in","chocolat-zooming-out"],NodeList.prototype.isPrototypeOf(e)||HTMLCollection.prototype.isPrototypeOf(e)?e.forEach(function(e,t){i.images.push({title:e.getAttribute("title"),src:e.getAttribute(n.imageSourceAttribute),srcset:e.getAttribute("data-srcset"),sizes:e.getAttribute("data-sizes")}),i.off(e,"click.chocolat"),i.on(e,"click.chocolat",function(e){i.init(t),e.preventDefault()})}):this.images=e,this.settings.container instanceof Element||this.settings.container instanceof HTMLElement?this.elems.container=this.settings.container:this.elems.container=document.body,this.api={open:function(e){return e=parseInt(e)||0,i.init(e)},close:function(){return i.close()},next:function(){return i.change(1)},prev:function(){return i.change(-1)},goto:function(e){return i.open(e)},current:function(){return i.settings.currentImageIndex},position:function(){return i.position(i.elems.img)},destroy:function(){return i.destroy()},set:function(e,t){return i.settings[e]=t},get:function(e){return i.settings[e]},getElem:function(e){return i.elems[e]}}}var e,n,i;return e=t,(n=[{key:"init",value:function(e){return this.state.initialized||(this.markup(),this.attachListeners(),this.settings.lastImageIndex=this.images.length-1,this.state.initialized=!0),this.settings.afterInitialize.call(this),this.load(e)}},{key:"load",value:function(t){var n=this;if(this.settings.beforeImageLoad.call(this),this.state.visible||(this.state.visible=!0,setTimeout(function(){n.elems.overlay.classList.add("chocolat-visible"),n.elems.wrapper.classList.add("chocolat-visible")},0),this.elems.container.classList.add("chocolat-open")),this.settings.fullScreen&&Ft(this.elems.wrapper),this.settings.currentImageIndex===t)return Promise.resolve();var i,s,o=setTimeout(function(){n.elems.loader.classList.add("chocolat-visible")},1e3),r=setTimeout(function(){r=void 0,i=F(function(){n.elems.imageCanvas.classList.remove("chocolat-visible")},n.elems.imageCanvas)},80);return Pt(this.images[t]).then(function(e){return s=e,r?(clearTimeout(r),Promise.resolve()):i}).then(function(){var e=t+1;return null!=n.images[e]&&Pt(n.images[e]),n.settings.currentImageIndex=t,n.elems.description.textContent=n.settings.description.call(n),n.elems.pagination.textContent=n.settings.pagination.call(n),n.arrows(),n.position(s).then(function(){return n.elems.loader.classList.remove("chocolat-visible"),clearTimeout(o),n.appear(s)})}).then(function(){n.elems.container.classList.toggle("chocolat-zoomable",n.zoomable(s,n.elems.wrapper)),n.settings.afterImageLoad.call(n)})}},{key:"position",value:function(e){var t=this,e=Wt({imgHeight:e.naturalHeight,imgWidth:e.naturalWidth,containerHeight:this.elems.container.clientHeight,containerWidth:this.elems.container.clientWidth,canvasWidth:this.elems.imageCanvas.clientWidth,canvasHeight:this.elems.imageCanvas.clientHeight,imageSize:this.settings.imageSize}),n=e.width,i=e.height;return F(function(){Object.assign(t.elems.imageWrapper.style,{width:n+"px",height:i+"px"})},this.elems.imageWrapper)}},{key:"appear",value:function(e){var t=this;return this.elems.imageWrapper.removeChild(this.elems.img),this.elems.img=e,this.elems.img.setAttribute("class","chocolat-img"),this.elems.imageWrapper.appendChild(this.elems.img),F(function(){t.elems.imageCanvas.classList.add("chocolat-visible")},this.elems.imageCanvas)}},{key:"change",value:function(e){if(this.state.visible&&this.settings.linkImages)return this.zoomOut(),(e=this.settings.currentImageIndex+parseInt(e))>this.settings.lastImageIndex?this.settings.loop?this.load(this.settings.firstImageIndex):void 0:e<this.settings.firstImageIndex?this.settings.loop?this.load(this.settings.lastImageIndex):void 0:this.load(e)}},{key:"arrows",value:function(){this.settings.loop?(this.elems.left.classList.add("active"),this.elems.right.classList.add("active")):this.settings.linkImages?(this.elems.right.classList.toggle("active",this.settings.currentImageIndex!==this.settings.lastImageIndex),this.elems.left.classList.toggle("active",this.settings.currentImageIndex!==this.settings.firstImageIndex)):(this.elems.left.classList.remove("active"),this.elems.right.classList.remove("active"))}},{key:"close",value:function(){var e,t,n=this;{if(!this.state.fullScreenOpen)return this.state.visible=!1,e=F(function(){n.elems.overlay.classList.remove("chocolat-visible")},this.elems.overlay),t=F(function(){n.elems.wrapper.classList.remove("chocolat-visible")},this.elems.wrapper),Promise.all([e,t]).then(function(){n.elems.container.classList.remove("chocolat-open"),n.settings.afterClose.call(n)});Ht()}}},{key:"destroy",value:function(){for(var e,t=this.events.length-1;0<=t;t--){var n=this.events[t],i=n.element,n=n.eventName;this.off(i,n)}this.state.initialized&&(this.state.fullScreenOpen&&Ht(),this.settings.currentImageIndex=void 0,this.state.visible=!1,this.state.initialized=!1,(e=this.elems.container.classList).remove.apply(e,M(this._cssClasses)),this.elems.wrapper.parentNode.removeChild(this.elems.wrapper))}},{key:"markup",value:function(){this.elems.container.classList.add("chocolat-open",this.settings.className),"cover"==this.settings.imageSize&&this.elems.container.classList.add("chocolat-cover"),this.elems.container!==document.body&&this.elems.container.classList.add("chocolat-in-container"),this.elems.wrapper=document.createElement("div"),this.elems.wrapper.setAttribute("id","chocolat-content-"+this.settings.setIndex),this.elems.wrapper.setAttribute("class","chocolat-wrapper"),this.elems.container.appendChild(this.elems.wrapper),this.elems.overlay=document.createElement("div"),this.elems.overlay.setAttribute("class","chocolat-overlay"),this.elems.wrapper.appendChild(this.elems.overlay),this.elems.loader=document.createElement("div"),this.elems.loader.setAttribute("class","chocolat-loader"),this.elems.wrapper.appendChild(this.elems.loader),this.elems.layout=document.createElement("div"),this.elems.layout.setAttribute("class","chocolat-layout"),this.elems.wrapper.appendChild(this.elems.layout),this.elems.top=document.createElement("div"),this.elems.top.setAttribute("class","chocolat-top"),this.elems.layout.appendChild(this.elems.top),this.elems.center=document.createElement("div"),this.elems.center.setAttribute("class","chocolat-center"),this.elems.layout.appendChild(this.elems.center),this.elems.left=document.createElement("div"),this.elems.left.setAttribute("class","chocolat-left"),this.elems.center.appendChild(this.elems.left),this.elems.imageCanvas=document.createElement("div"),this.elems.imageCanvas.setAttribute("class","chocolat-image-canvas"),this.elems.center.appendChild(this.elems.imageCanvas),this.elems.imageWrapper=document.createElement("div"),this.elems.imageWrapper.setAttribute("class","chocolat-image-wrapper"),this.elems.imageCanvas.appendChild(this.elems.imageWrapper),this.elems.img=document.createElement("img"),this.elems.img.setAttribute("class","chocolat-img"),this.elems.imageWrapper.appendChild(this.elems.img),this.elems.right=document.createElement("div"),this.elems.right.setAttribute("class","chocolat-right"),this.elems.center.appendChild(this.elems.right),this.elems.bottom=document.createElement("div"),this.elems.bottom.setAttribute("class","chocolat-bottom"),this.elems.layout.appendChild(this.elems.bottom),this.elems.close=document.createElement("span"),this.elems.close.setAttribute("class","chocolat-close"),this.elems.top.appendChild(this.elems.close),this.elems.description=document.createElement("span"),this.elems.description.setAttribute("class","chocolat-description"),this.elems.bottom.appendChild(this.elems.description),this.elems.pagination=document.createElement("span"),this.elems.pagination.setAttribute("class","chocolat-pagination"),this.elems.bottom.appendChild(this.elems.pagination),this.elems.setTitle=document.createElement("span"),this.elems.setTitle.setAttribute("class","chocolat-set-title"),this.elems.setTitle.textContent=this.settings.setTitle(),this.elems.bottom.appendChild(this.elems.setTitle),this.elems.fullscreen=document.createElement("span"),this.elems.fullscreen.setAttribute("class","chocolat-fullscreen"),this.elems.bottom.appendChild(this.elems.fullscreen),this.settings.afterMarkup.call(this)}},{key:"attachListeners",value:function(){var a=this,e=(this.off(document,"keydown.chocolat"),this.on(document,"keydown.chocolat",function(e){a.state.initialized&&(37==e.keyCode?a.change(-1):39==e.keyCode?a.change(1):27==e.keyCode&&a.close())}),this.elems.wrapper.querySelector(".chocolat-right")),e=(this.off(e,"click.chocolat"),this.on(e,"click.chocolat",function(){a.change(1)}),this.elems.wrapper.querySelector(".chocolat-left"));this.off(e,"click.chocolat"),this.on(e,"click.chocolat",function(){a.change(-1)}),this.off(this.elems.close,"click.chocolat"),this.on(this.elems.close,"click.chocolat",this.close.bind(this)),this.off(this.elems.fullscreen,"click.chocolat"),this.on(this.elems.fullscreen,"click.chocolat",function(){a.state.fullScreenOpen?Ht():Ft(a.elems.wrapper)}),this.off(document,"fullscreenchange.chocolat"),this.on(document,"fullscreenchange.chocolat",function(){document.fullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement?a.state.fullScreenOpen=!0:a.state.fullScreenOpen=!1}),this.off(document,"webkitfullscreenchange.chocolat"),this.on(document,"webkitfullscreenchange.chocolat",function(){document.fullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement?a.state.fullScreenOpen=!0:a.state.fullScreenOpen=!1}),this.settings.closeOnBackgroundClick&&(this.off(this.elems.overlay,"click.chocolat"),this.on(this.elems.overlay,"click.chocolat",this.close.bind(this))),this.off(this.elems.wrapper,"click.chocolat"),this.on(this.elems.wrapper,"click.chocolat",function(){null!==a.state.initialZoomState&&a.state.visible&&(a.elems.container.classList.add("chocolat-zooming-out"),a.zoomOut().then(function(){a.elems.container.classList.remove("chocolat-zoomed"),a.elems.container.classList.remove("chocolat-zooming-out")}))}),this.off(this.elems.imageWrapper,"click.chocolat"),this.on(this.elems.imageWrapper,"click.chocolat",function(e){null===a.state.initialZoomState&&a.elems.container.classList.contains("chocolat-zoomable")&&(e.stopPropagation(),a.elems.container.classList.add("chocolat-zooming-in"),a.zoomIn(e).then(function(){a.elems.container.classList.add("chocolat-zoomed"),a.elems.container.classList.remove("chocolat-zooming-in")}))}),this.on(this.elems.wrapper,"mousemove.chocolat",function(e){var t,n,i,s,o,r;null!==a.state.initialZoomState&&a.state.visible&&(s=(i=a.elems.wrapper.getBoundingClientRect()).top+window.scrollY,i=i.left+window.scrollX,t=a.elems.wrapper.clientHeight,o=a.elems.wrapper.clientWidth,r=a.elems.img.width,n=a.elems.img.height,i=[e.pageX-o/2-i,e.pageY-t/2-s],e=0,o<r&&(s=a.settings.zoomedPaddingX(r,o),e=i[0]/(o/2),e*=(r-o)/2+s),r=0,t<n&&(o=a.settings.zoomedPaddingY(n,t),r=i[1]/(t/2),r*=(n-t)/2+o),a.elems.img.style.marginLeft=-e+"px",a.elems.img.style.marginTop=-r+"px")}),this.on(window,"resize.chocolat",function(e){var t,n;a.state.initialized&&a.state.visible&&(t=50,n=function(){Wt({imgHeight:a.elems.img.naturalHeight,imgWidth:a.elems.img.naturalWidth,containerHeight:a.elems.wrapper.clientHeight,containerWidth:a.elems.wrapper.clientWidth,canvasWidth:a.elems.imageCanvas.clientWidth,canvasHeight:a.elems.imageCanvas.clientHeight,imageSize:a.settings.imageSize});a.position(a.elems.img).then(function(){a.elems.container.classList.toggle("chocolat-zoomable",a.zoomable(a.elems.img,a.elems.wrapper))})},clearTimeout(xt),xt=setTimeout(function(){n()},t))})}},{key:"zoomable",value:function(e,t){var n=t.clientWidth,t=t.clientHeight,n=!(!this.settings.allowZoom||!(e.naturalWidth>n||e.naturalHeight>t)),t=e.clientWidth>e.naturalWidth||e.clientHeight>e.naturalHeight;return n&&!t}},{key:"zoomIn",value:function(e){return this.state.initialZoomState=this.settings.imageSize,this.settings.imageSize="native",this.position(this.elems.img)}},{key:"zoomOut",value:function(e){return this.settings.imageSize=this.state.initialZoomState||this.settings.imageSize,this.state.initialZoomState=null,this.elems.img.style.margin=0,this.position(this.elems.img)}},{key:"on",value:function(e,t,n){n=this.events.push({element:e,eventName:t,cb:n});e.addEventListener(t.split(".")[0],this.events[n-1].cb)}},{key:"off",value:function(t,n){var e=this.events.findIndex(function(e){return e.element===t&&e.eventName===n});this.events[e]&&(t.removeEventListener(n.split(".")[0],this.events[e].cb),this.events.splice(e,1))}}])&&H(e.prototype,n),i&&H(e,i),t}(),Rt=[];window.Chocolat=function(e,t){t=Object.assign({},Mt,{images:[]},t,{setIndex:Rt.length}),e=new _t(e,t);return Rt.push(e),e}}();